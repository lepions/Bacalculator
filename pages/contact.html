<!DOCTYPE html>


<html lang="fr">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		
		<title>Bacalc | Contact</title>
		<link rel="stylesheet" type="text/css" href="contact.css">

	</head>

	<body>
		<div class="container">  
      <form id="contact">
        <h3>Contact de Bacalc</h3>
        <h4>Contactez-nous pour toute demande.</h4>
        <fieldset>
          <input name="name" id="name" placeholder="Votre Nom" type="text" tabindex="1" required autofocus>
        </fieldset>
        <fieldset>
          <input name="email" id="email" placeholder="Votre adresse mail" type="email" tabindex="2" required>
        </fieldset>
        <fieldset>
          <input name="phone" placeholder="Votre numero de téléphone (optional)" type="tel" tabindex="3" required>
        </fieldset>
        <fieldset>
          <textarea name="message" id="message" placeholder="Tapez votres message ici ..." tabindex="5" required></textarea>
        </fieldset>
        <fieldset>
          <button name="submit" type="submit" id="contact-submit" data-submit="...Sending">Envoyez</button>
        </fieldset>
      </form>
    </div>
  <script>
    const sendgrid = require('../@sendgrid/mail')
    document.getElementById('contact').addEventListener('submit', function(event) {
      event.preventDefault(); // Empêche la soumission du formulaire

      // Récupération des valeurs du formulaire
      var name = document.getElementById('name').value;
      var email = document.getElementById('email').value;
      var phone = document.getElementById('phone').value;
      var message = document.getElementById('message').value;

      // Construction de l'objet e-mail
      var emailData = {
        to: 'bacalculator.contact@gmail.com', // Remplacez par votre adresse e-mail destinataire
        from: email,
        subject: 'Nouveau message de contact',
        text: 'Nom: ' + name + '\nEmail: ' + email + '\nMessage: ' + message
      };

      // Envoi de l'e-mail via l'API SendGrid
      sendEmail(emailData);
    });

    function sendEmail(emailData) {
      var sendGridAPIKey = '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'; // Remplacez par votre clé API SendGrid

      sendgrid.send(emailData, function(error, body) {
        if (error) {
          console.log('Une erreur s\'est produite lors de l\'envoi de l\'e-mail:', error);
          alert('Une erreur s\'est produite lors de l\'envoi de l\'e-mail.');
        } else {
          console.log('E-mail envoyé avec succès!');
          alert('E-mail envoyé avec succès!');
          document.getElementById('contactForm').reset();
        }
      });
    }
  </script>
    
	</body>
</html>











